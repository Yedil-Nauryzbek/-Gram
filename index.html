<!DOCTYPE html>
<html lang="kk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ТарихGram</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen">

  <!-- Навбар -->
  <header class="bg-white shadow-md sticky top-0 z-10">
    <div class="max-w-2xl mx-auto flex justify-between items-center px-4 py-3">
      <h1 class="text-2xl font-bold text-blue-800">Тарих<span class="text-red-600">Gram</span></h1>
      <span class="font-semibold text-gray-700 text-sm">Еділ Наурызбек &amp; Жауған Алдияр</span>
    </div>
  </header>

  <!-- Feed -->
  <main id="feed" class="max-w-2xl mx-auto mt-6 space-y-6 px-4 pb-20">

    <!-- Пост 1 -->
    <article class="bg-white rounded-2xl shadow-md overflow-hidden post" data-post-id="1">
      <div class="flex items-center px-4 py-3 border-b">
        <img src="https://avatars.mds.yandex.net/get-entity_search/1978677/1174212571/S600xU_2x" alt="Қасым хан" class="w-10 h-10 rounded-full mr-3 border"
        <span class="font-semibold">Қасым хан</span>
      </div>

      <img src="https://e-history.kz/upload/medialibrary/f72/f7272c5a4644741cc20085ec0a21a615.jpg" alt="Қасым хан пост суреті" class="w-full object-cover">


      <div class="px-4 py-3">
        <div class="flex items-center space-x-4 text-xl mb-2">
          <button class="like-btn">❤️</button>
          <span class="like-count text-gray-700">42 лайк</span>
          <span class="comment-count text-gray-700">24 коммент</span>
        </div>

        <p class="mb-3 text-gray-800">Халқымның саны алғаш рет 1 миллионға жетті!</p>

        <!-- Комментарии -->
        <div class="space-y-2">
          <h4 class="font-semibold">Комментарии:</h4>
          <ul class="comment-list list-disc pl-5 text-sm text-gray-700"></ul>
          <p class="view-all text-blue-600 text-sm cursor-pointer"></p>
          <div class="flex space-x-2 mt-1">
            <input type="text" placeholder="Комментарий жаз..." class="comment-input flex-1 border rounded-lg px-2 py-1">
            <button class="comment-btn bg-blue-600 text-white px-3 rounded-lg">Жазу</button>
          </div>
        </div>
      </div>
    </article>

    <!-- Пост 2 -->
    <article class="bg-white rounded-2xl shadow-md overflow-hidden post" data-post-id="2">
      <div class="flex items-center px-4 py-3 border-b">
<img src="https://avatars.mds.yandex.net/get-entity_search/10844871/1152437772/S600xU_2x" alt="Абылай хан" class="w-10 h-10 rounded-full mr-3 border">

        <span class="font-semibold">Абылай хан</span>
      </div>

      <img src="https://ognialatau.kz/uploads/news/14440/news14440.jpg" alt="Абылай хан пост суреті" class="w-full object-cover">


      <div class="px-4 py-3">
        <div class="flex items-center space-x-4 text-xl mb-2">
          <button class="like-btn">❤️</button>
          <span class="like-count text-gray-700">87 лайк</span>
          <span class="comment-count text-gray-700">12 коммент</span>
        </div>

        <p class="mb-3 text-gray-800">Жоңғарларға қарсы халықты біріктірдім!</p>

        <!-- Комментарии -->
        <div class="space-y-2">
          <h4 class="font-semibold">Комментарии:</h4>
          <ul class="comment-list list-disc pl-5 text-sm text-gray-700"></ul>
          <p class="view-all text-blue-600 text-sm cursor-pointer"></p>
          <div class="flex space-x-2 mt-1">
            <input type="text" placeholder="Комментарий жаз..." class="comment-input flex-1 border rounded-lg px-2 py-1">
            <button class="comment-btn bg-blue-600 text-white px-3 rounded-lg">Жазу</button>
          </div>
        </div>
      </div>
    </article>

  </main>

  <!-- Script -->
  <script>
    const currentUser = "Еділ Наурызбек & Жауған Алдияр";

    const POSTS = {
      1: {
        likes: 42,
        liked: false,
        commentsAll: [
          { author: "Жырау", text: "Бұл ұлы жеңіс!" },
          { author: "Тарихшы", text: "Қасым ханның дәуірі шынында ерекше." },
          { author: "Аноним", text: "Қазақ хандығы жасасын!" },
          { author: "Зиялы", text: "Керемет кезең, зерттеу керек." },
          { author: "Біреу", text: "Тарих қызықты." }
        ],
        displayedCount: 24,
        firstVisibleCount: 2
      },
      2: {
        likes: 87,
        liked: false,
        commentsAll: [
          { author: "Жырау", text: "Батырлығын ел ұмытпас." },
          { author: "Аноним", text: "Ұлы даланың қаһарманы!" },
          { author: "Тарихшы", text: "Абылайдың жорықтары маңызды." }
        ],
        displayedCount: 12,
        firstVisibleCount: 2
      }
    };

    document.querySelectorAll('.post').forEach(postEl => {
      const id = postEl.getAttribute('data-post-id');
      const cfg = POSTS[id];

      const likeBtn = postEl.querySelector('.like-btn');
      const likeCountSpan = postEl.querySelector('.like-count');
      const commentCountSpan = postEl.querySelector('.comment-count');
      const commentListEl = postEl.querySelector('.comment-list');
      const viewAllEl = postEl.querySelector('.view-all');
      const commentInput = postEl.querySelector('.comment-input');
      const commentBtn = postEl.querySelector('.comment-btn');

      // like
      likeCountSpan.textContent = cfg.likes + " лайк";
      likeBtn.addEventListener('click', () => {
        cfg.liked = !cfg.liked;
        cfg.likes += cfg.liked ? 1 : -1;
        likeBtn.classList.toggle('text-red-500', cfg.liked);
        likeCountSpan.textContent = cfg.likes + " лайк";
      });

      // update comment count
      function updateCommentCount() {
        commentCountSpan.textContent = cfg.displayedCount + " коммент";
      }

      // render comments
      function renderComments(showAll = false) {
        commentListEl.innerHTML = "";
        const toShow = showAll ? cfg.commentsAll : cfg.commentsAll.slice(0, cfg.firstVisibleCount);
        toShow.forEach(c => {
          const li = document.createElement('li');
          li.innerHTML = `<span class="font-semibold">${c.author}:</span> ${c.text}`;
          commentListEl.appendChild(li);
        });

        if (!showAll) {
          viewAllEl.textContent = `Барлық ${cfg.displayedCount} комментарийді көру...`;
        } else {
          viewAllEl.textContent = "Жасыру";
        }

        updateCommentCount();
      }

      // init render
      let expanded = false;
      renderComments(expanded);

      viewAllEl.addEventListener('click', () => {
        expanded = !expanded;
        renderComments(expanded);
      });

      commentBtn.addEventListener('click', () => {
        const text = commentInput.value.trim();
        if (!text) return;
        cfg.commentsAll.unshift({ author: currentUser, text });
        cfg.displayedCount++;
        commentInput.value = "";
        renderComments(expanded);
      });
    });
  </script>
</body>
</html>
